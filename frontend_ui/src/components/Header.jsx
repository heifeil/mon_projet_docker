import React, { useState } from 'react';
import { LogIn } from 'lucide-react'; // J'ai retiré LogOut car inutile
import { useAuth } from '../context/AuthContext';
import LoginModal from './LoginModal';

const Header = () => {
  const { isAuthenticated } = useAuth(); // On a juste besoin de savoir si on est connecté ou non
  const [showModal, setShowModal] = useState(false);

  return (
    <>
      <header className="header">
        {/* LOGO SPIE - Inchangé */}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 105.833 47.625"
          width="120px"
          height="54px"
        >
          <defs>
            <clipPath id="c">
              <path d="M487.559 746h65.199v9h-65.2zm0 0"></path>
            </clipPath>
            <clipPath id="b">
              <path d="M487.559 725h65.199v22h-65.2zm0 0"></path>
            </clipPath>
            <clipPath id="a">
              <path d="M487.559 725h65.199v30h-65.2zm0 0"></path>
            </clipPath>
          </defs>
          <g
            fill="#fff"
            clipPath="url(#a)"
            transform="matrix(1.63964 0 0 1.64047 -799.753 -1189.612)"
          >
            <path d="M552.29 747.227v6.894h-64.544v-28.887h64.547v21.176zm0 0"></path>
          </g>
          <g
            fill="#f0af00"
            clipPath="url(#b)"
            transform="matrix(1.63964 0 0 1.64047 -799.753 -1189.612)"
          >
            <path d="M520.023 744.207c12.442.008 23.758.856 32.27 2.238v-21.28h-64.547v21.28c8.508-1.382 19.828-2.23 32.27-2.238h.008"></path>
          </g>
          <g
            fill="#f0af00"
            clipPath="url(#c)"
            transform="matrix(1.63964 0 0 1.64047 -799.753 -1189.612)"
          >
            <path d="M520.02 746.54c11.648 0 22.636.26 32.27.726v6.93h-64.544v-6.93c9.637-.465 20.625-.727 32.274-.727"></path>
          </g>
          <path d="M9.476 20.185c-.769 0-1.506-.096-2.21-.224v-.974c.762.154 1.41.289 2.05.289.916 0 1.839-.219 1.839-.917 0-.84-1.333-.91-1.974-1.064-.91-.224-1.954-.557-1.954-1.755 0-1.423 1.384-1.827 2.685-1.827.929 0 1.59.11 2.095.18v.929c-.602-.102-1.25-.199-1.87-.199-.635 0-1.654.097-1.654.827 0 1.352 3.966.385 3.966 2.762 0 1.217-1.044 1.974-2.973 1.974"></path>
          <path d="M9.476 20.185c-.769 0-1.506-.096-2.21-.224v-.974c.762.154 1.41.289 2.05.289.916 0 1.839-.219 1.839-.917 0-.84-1.333-.91-1.974-1.064-.91-.224-1.954-.557-1.954-1.755 0-1.423 1.384-1.827 2.685-1.827.929 0 1.59.11 2.095.18v.929c-.602-.102-1.25-.199-1.87-.199-.635 0-1.654.097-1.654.827 0 1.352 3.966.385 3.966 2.762 0 1.217-1.044 1.974-2.973 1.974M18.492 16.917c0 1.775-.98 2.39-2.198 2.39-.294 0-.557 0-1.179-.083v-4.53c.532-.047.744-.047.993-.047 1.48 0 2.384.66 2.384 2.269m1.333 0c0-.968-.314-2.09-1.378-2.71-.698-.385-1.493-.469-2.441-.469-.57 0-1.41.058-2.134.097v8.824h1.243v-2.525c.647.083.993.096 1.269.096.705 0 1.403-.141 2.102-.545.916-.538 1.34-1.621 1.34-2.768"></path>
          <path d="M18.492 16.917c0 1.775-.98 2.39-2.198 2.39-.294 0-.557 0-1.179-.083v-4.53c.532-.047.744-.047.993-.047 1.48 0 2.384.66 2.384 2.269m1.333 0c0-.968-.314-2.09-1.378-2.71-.698-.385-1.493-.469-2.441-.469-.57 0-1.41.058-2.134.097v8.824h1.243v-2.525c.647.083.993.096 1.269.096.705 0 1.403-.141 2.102-.545.916-.538 1.34-1.621 1.34-2.768M21.478 13.841h1.237v6.21h-1.237zm0-2.659h1.237v1.147h-1.237zm0 0"></path>
          <path d="M21.478 13.841h1.237v6.21h-1.237zm0-2.659h1.237v1.147h-1.237zM29.213 16.494h-3.48c.04-1.217.622-1.941 1.73-1.941 1.301 0 1.724.813 1.75 1.941m1.403.84v-.308c0-1.999-.91-3.313-3.152-3.313-1.68 0-3.095.923-3.095 3.108 0 2.121 1.268 3.371 3.562 3.371.725 0 1.397-.032 2.173-.224v-.84c-.628.11-1.18.18-1.775.18-.942 0-2.397-.058-2.608-1.974zm0 0"></path>
          <path d="M29.213 16.494h-3.48c.04-1.217.622-1.941 1.73-1.941 1.301 0 1.724.813 1.75 1.941m1.403.84v-.308c0-1.999-.91-3.313-3.152-3.313-1.68 0-3.095.923-3.095 3.108 0 2.121 1.268 3.371 3.562 3.371.725 0 1.397-.032 2.173-.224v-.84c-.628.11-1.18.18-1.775.18-.942 0-2.397-.058-2.608-1.974zM39.165 16.943c0 1.429-.776 2.339-2.288 2.339-.224 0-.577 0-1.108-.07v-4.557a9.435 9.435 0 0 1 1.134-.077c1.55 0 2.262.84 2.262 2.365m1.313.014c0-2.083-1.255-3.281-3.242-3.281-.186 0-.686 0-1.455.096v-2.589h-1.243v8.798c.859.141 1.814.206 2.34.206 2.056 0 3.6-1.173 3.6-3.23"></path>
          <path d="M39.165 16.943c0 1.429-.776 2.339-2.288 2.339-.224 0-.577 0-1.108-.07v-4.557a9.435 9.435 0 0 1 1.134-.077c1.55 0 2.262.84 2.262 2.365m1.313.014c0-2.083-1.255-3.281-3.242-3.281-.186 0-.686 0-1.455.096v-2.589h-1.243v8.798c.859.141 1.814.206 2.34.206 2.056 0 3.6-1.173 3.6-3.23M46.105 19.275c-.635.033-.885.058-1.218.058-.993 0-1.993-.109-1.993-1.147 0-.91.801-1.102 2.102-1.102.186 0 .577.018 1.109.032zm1.23.763V15.77c0-1.82-1.173-2.057-2.98-2.057-.75 0-1.506.07-2.3.224v.923c.692-.115 1.467-.25 2.16-.25 1.813 0 1.877.32 1.877 1.635-.436 0-.775-.033-1.057-.033-1.365 0-3.429.005-3.429 1.935 0 1.68 1.18 2.032 2.871 2.032.89 0 1.75-.019 2.858-.141"></path>
          <path d="M46.105 19.275c-.635.033-.885.058-1.218.058-.993 0-1.993-.109-1.993-1.147 0-.91.801-1.102 2.102-1.102.186 0 .577.018 1.109.032zm1.23.763V15.77c0-1.82-1.173-2.057-2.98-2.057-.75 0-1.506.07-2.3.224v.923c.692-.115 1.467-.25 2.16-.25 1.813 0 1.877.32 1.877 1.635-.436 0-.775-.033-1.057-.033-1.365 0-3.429.005-3.429 1.935 0 1.68 1.18 2.032 2.871 2.032.89 0 1.75-.019 2.858-.141M50.988 14.72v3.678c0 .692.218.743.84.743h.986v.91h-1.102c-1.307 0-1.967-.083-1.967-1.532v-3.8H48.38v-.878h1.365V12.01c.211-.071.743-.25 1.243-.404v2.236h1.87v.878zm0 0"></path>
          <path d="M50.988 14.72v3.678c0 .692.218.743.84.743h.986v.91h-1.102c-1.307 0-1.967-.083-1.967-1.532v-3.8H48.38v-.878h1.365V12.01c.211-.071.743-.25 1.243-.404v2.236h1.87v.878zM54.275 13.841h1.243v6.21h-1.243zm0-2.659h1.243v1.147h-1.243zm0 0"></path>
          <path d="M54.275 13.841h1.243v6.21h-1.243zm0-2.659h1.243v1.147h-1.243zM61.49 15.84c0 .962-.512 1.366-1.505 1.366-.84 0-1.436-.417-1.436-1.365 0-.788.52-1.288 1.436-1.288.91 0 1.506.461 1.506 1.288m2.16-1.23v-.981l-2.756.154a5.464 5.464 0 0 0-.91-.07c-1.564 0-2.736.717-2.736 2.19 0 1.039.608 1.513 1.05 1.75-.608.41-.929.814-.929 1.404 0 1.115 1.263 1.223 2.557 1.21h.878c.436.015 1.39 0 1.39.59 0 .532-.973.936-2.306.936-.686 0-1.577-.135-2.288-.25v.897c.897.18 1.717.218 2.5.218 1.998 0 3.415-.622 3.415-1.98 0-1.93-2.98-1.359-4.262-1.487-.468-.064-.647-.18-.647-.371 0-.34.397-.622.686-.802.224.033.455.058.679.058 2.262 0 2.813-1.256 2.813-2.191 0-.584-.224-1.051-.564-1.359.48.037 1.16.083 1.43.083"></path>
          <path d="M61.49 15.84c0 .962-.512 1.366-1.505 1.366-.84 0-1.436-.417-1.436-1.365 0-.788.52-1.288 1.436-1.288.91 0 1.506.461 1.506 1.288m2.16-1.23v-.981l-2.756.154a5.464 5.464 0 0 0-.91-.07c-1.564 0-2.736.717-2.736 2.19 0 1.039.608 1.513 1.05 1.75-.608.41-.929.814-.929 1.404 0 1.115 1.263 1.223 2.557 1.21h.878c.436.015 1.39 0 1.39.59 0 .532-.973.936-2.306.936-.686 0-1.577-.135-2.288-.25v.897c.897.18 1.717.218 2.5.218 1.998 0 3.415-.622 3.415-1.98 0-1.93-2.98-1.359-4.262-1.487-.468-.064-.647-.18-.647-.371 0-.34.397-.622.686-.802.224.033.455.058.679.058 2.262 0 2.813-1.256 2.813-2.191 0-.584-.224-1.051-.564-1.359.48.037 1.16.083 1.43.083M69.29 20.057v-3.966c0-.66-.014-1.385-1.129-1.385-.634 0-1.57.346-2.127.57v4.781H64.81v-6.222h1.134v.564c1.301-.545 1.743-.686 2.634-.686.936 0 1.967.52 1.967 1.89v4.454zm0 0"></path>
          <path d="M69.29 20.057v-3.966c0-.66-.014-1.385-1.129-1.385-.634 0-1.57.346-2.127.57v4.781H64.81v-6.222h1.134v.564c1.301-.545 1.743-.686 2.634-.686.936 0 1.967.52 1.967 1.89v4.454zM77.28 16.904c0 1.468-.673 2.416-1.967 2.416-1.288 0-1.961-.948-1.961-2.416 0-1.454.686-2.326 1.96-2.326 1.283 0 1.968.872 1.968 2.326m1.32 0c0-1.986-1.21-3.216-3.287-3.216-2.09 0-3.287 1.23-3.287 3.216 0 1.942 1.191 3.3 3.287 3.3 1.922 0 3.287-1.37 3.287-3.3"></path>
          <path d="M77.28 16.904c0 1.468-.673 2.416-1.967 2.416-1.288 0-1.961-.948-1.961-2.416 0-1.454.686-2.326 1.96-2.326 1.283 0 1.968.872 1.968 2.326m1.32 0c0-1.986-1.21-3.216-3.287-3.216-2.09 0-3.287 1.23-3.287 3.216 0 1.942 1.191 3.3 3.287 3.3 1.922 0 3.287-1.37 3.287-3.3M80.254 11.182h1.243v8.869h-1.243zm0 0"></path>
          <path d="M80.254 11.182h1.243v8.869h-1.243zM83.49 11.182h1.236v8.869H83.49zm0 0"></path>
          <path d="M83.49 11.182h1.236v8.869H83.49zM91.211 16.494h-3.473c.032-1.217.615-1.941 1.724-1.941 1.3 0 1.724.813 1.75 1.941m1.403.84v-.308c0-1.999-.91-3.313-3.153-3.313-1.679 0-3.095.923-3.095 3.108 0 2.121 1.269 3.371 3.563 3.371.718 0 1.39-.032 2.179-.224v-.84c-.641.11-1.18.18-1.782.18-.942 0-2.397-.058-2.608-1.974zm0 0"></path>
          <path d="M91.211 16.494h-3.473c.032-1.217.615-1.941 1.724-1.941 1.3 0 1.724.813 1.75 1.941m1.403.84v-.308c0-1.999-.91-3.313-3.153-3.313-1.679 0-3.095.923-3.095 3.108 0 2.121 1.269 3.371 3.563 3.371.718 0 1.39-.032 2.179-.224v-.84c-.641.11-1.18.18-1.782.18-.942 0-2.397-.058-2.608-1.974zM96.03 20.185c-.769 0-1.5-.096-2.21-.224v-.974c.756.154 1.403.289 2.05.289.916 0 1.84-.219 1.84-.917 0-.84-1.327-.91-1.98-1.064-.904-.224-1.949-.557-1.949-1.755 0-1.423 1.378-1.827 2.685-1.827.936 0 1.59.11 2.102.18v.929c-.609-.102-1.256-.199-1.884-.199-.628 0-1.647.097-1.647.827 0 1.352 3.96.385 3.96 2.762 0 1.217-1.038 1.974-2.967 1.974"></path>
          <path d="M96.03 20.185c-.769 0-1.5-.096-2.21-.224v-.974c.756.154 1.403.289 2.05.289.916 0 1.84-.219 1.84-.917 0-.84-1.327-.91-1.98-1.064-.904-.224-1.949-.557-1.949-1.755 0-1.423 1.378-1.827 2.685-1.827.936 0 1.59.11 2.102.18v.929c-.609-.102-1.256-.199-1.884-.199-.628 0-1.647.097-1.647.827 0 1.352 3.96.385 3.96 2.762 0 1.217-1.038 1.974-2.967 1.974"></path>
        </svg>

        {/* CONDITION MODIFIÉE : On affiche le bouton seulement si on est PAS connecté */}
        {!isAuthenticated && (
          <button className="login-btn" onClick={() => setShowModal(true)}>
            <LogIn size={16} style={{ marginRight: 5 }} /> Connexion
          </button>
        )}
      </header>

      {showModal && <LoginModal onClose={() => setShowModal(false)} />}
    </>
  );
};

export default Header;